(function(a,b){if('function'==typeof define&&define.amd)define(['exports'],b);else if('undefined'!=typeof exports)b(exports);else{var c={exports:{}};b(c.exports),a.tagmanagerWrap=c.exports}})(this,function(a){'use strict';function b(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function c(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(a,'__esModule',{value:!0});var d=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},e=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f={virtualPageViewEvent:'virtual_pageview',startPush:{experiements:[]},addExperiments:[]},g=function(){function a(b){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f;c(this,a),this.options=d(f,e),this.dataLayer=b||[],this.setupExperiments(),this.dataLayer.push(this.options.startPush)}return e(a,[{key:'setupExperiments',value:function(){return d(this.options.startPush,{experiments:this.experiments()}),this}},{key:'experiments',value:function(){return this.options.startPush.experiments=[this.options.startPush.experiments].concat(b(this.options.addExperiments)),this.options.startPush.experiments}},{key:'prependExperiment',value:function(a){if(this.dataLayer[0].experiments){var c=d({},this.options.startPush,{experiments:[a]});return this.dataLayer[0].experiments=[c].concat(b(this.dataLayer[0].experiments)),this.dataLayer[0].experiments}return this.dataLayer[0].experiments.push(a)}},{key:'virtualPageView',value:function(a,b){this.dataLayer.push({vpname:a,event:b||this.options.virtualPageViewEvent})}},{key:'eventCategory',value:function(a,b){var c=d({eventCategory:a,event:'GAEvent'},b||{});return this.dataLayer.push(c)}},{key:'custom',value:function(a){return this.dataLayer.push(a)}},{key:'bindEvents',value:function(){var a=document.querySelectorAll('[data-gtm-event="ga-event"]');return a.forEach(function(a){a.getAttribute('data-gtm-bind')||(a.addEventListener('click',this.clickGAEvent.bind(this)),a.setAttribute('data-gtm-binded',!0))},this),a}},{key:'clickGAEvent',value:function(a){var b=a.curentTarget,c=b.getAttribute('data-gtm-category'),d=b.getAttribute('data-gtm-action')||null,e=b.getAttribute('data-gtm-label')||null,f=b.getAttribute('data-gtm-value')||null,g=b.getAttribute('data-gtm-property')||null;this.eventCategory(c,{eventAction:d,eventLabel:e,eventValue:f,eventProperty:g})}}]),a}();a.default=g});
